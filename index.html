<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cointab SE-ASSIGNMENT</title>
</head>

<body>
  <h1>Cointab SE-ASSIGNMENT</h1>
  <button onclick="fetchAllUsers()">All Users</button>

  <script>
    function fetchAllUsers() {
      fetch('http://localhost:3000/api/all-users')
        .then(response => response.json())
        .then(users => {
          console.log(users);
          displayUsers(users);
        })
        .catch(error => console.error('Error fetching users:', error));
    }

    function displayUsers(users) {
      // Create the table element
      const userListTable = document.createElement('table');

      // Create the table header (thead)
      const tableHead = document.createElement('thead');
      const headerRow = tableHead.insertRow();
      const headers = ['Name', 'Email', 'Phone', 'Website', 'City', 'Company', 'Add', 'Open'];

      headers.forEach(headerText => {
        const header = document.createElement('th');
        header.textContent = headerText;
        headerRow.appendChild(header);
      });

      userListTable.appendChild(tableHead);

      // Create the table body (tbody)
      const tableBody = document.createElement('tbody');

      users.forEach(user => {
        const row = tableBody.insertRow();
        row.innerHTML = `
          <td>${user.name}</td>
          <td>${user.email}</td>
          <td>${user.phone}</td>
          <td>${user.website}</td>
          <td>${user.city}</td>
          <td>${user.company}</td>
          <td><button onclick="addUser(${JSON.stringify(user)})">Add</button></td>
          <td><button id="openButton_${user.id}" style="display:none" onclick="openUser(${user.id})">Open</button></td>
        `;
      });

      userListTable.appendChild(tableBody);

      // Replace existing table or append the new table
      const existingTable = document.getElementById('userList');
      if (existingTable) {
        existingTable.replaceWith(userListTable);
      } else {
        document.body.appendChild(userListTable);
      }
    }

    function addUser(user) {
      // Implement the addUser function as before
    }

    function openUser(userId) {
      // Implement the openUser function as before
    }
  </script>
</body>

</html>
